<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>登录注册界面</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/head.css" />
    <link rel="stylesheet" href="css/iconfont.css">
    <link rel="stylesheet" href="bootstrap-5.3.2/dist/css/bootstrap.min.css">
    <style>
        #whole-container1 {
            background-image: url('images/house_bg.jpg');
            background-repeat: no-repeat;
            background-size: 100% 100%;
            height: 100vh;
        }

        .form-container {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 50px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            opacity: 0.9;
        }

        .extra-link {
            margin-top: 20px;
        }
        .nav-item-combined {
            display: flex;
            align-items: center;
        }

        .nav-item-combined a {
            padding: 0 5px;
        }

        .nav-item-combined .separator {
            margin: 0 5px;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <svg t="1717078667326" class="icon" viewBox="0 0 1134 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="7392" width="50" height="50" fill="white">
                <path
                    d="M936.073503 710.338875l-55.003823-55.030362a123.781824 123.781824 0 0 0 
            23.447951-72.599739c0-68.578952-55.627509-124.193191-124.206462-124.193191-68.592222 0-124.219731 
            55.614239-124.219731 124.193191a124.206461 124.206461 0 0 0 196.81947 100.771781l54.990552 55.017093a9.992251 9.992251 0 0 0 
            14.105927 0l14.105926-14.105926a9.939171 9.939171 0 0 0-0.03981-14.052847zM780.27136 671.444737a88.749232 88.749232 0 0 
            1-88.735963-88.749232 88.749232 88.749232 0 0 1 177.471925 0 88.762502 88.762502 0 0 1-88.735962 88.749232z"
                    p-id="7393"></path>
                <path
                    d="M519.49087 592.196768c0-140.647894 108.455065-255.883888 246.276466-266.844843l-222.801975-179.449143c-24.774943-19.944691-65.288012-19.944691-90.076224 0l-146.805137 118.234997v-61.028367a28.384361 28.384361 0 0 0-28.291472-28.304742h-26.96448a28.397631 28.397631 0 0 0-28.304741 28.304742v128.346677l-69.826325 56.251195c-24.774943 19.944691-24.774943 52.575427 0 72.546659l19.745642 15.897365v332.504413c0 28.225122 28.66303 51.314785 63.669082 51.314785h523.631086c3.30421 0 6.502261-0.265398 9.660502-0.663497-139.54649-9.209325-249.912424-125.241515-249.912424-267.110241z m-170.717534-10.788446c0 11.876579-9.700312 21.550352-21.563622 21.550352h-41.349074a21.590162 21.590162 0 0 1-21.550352-21.550352V540.085788c0-11.863309 9.687042-21.550352 21.550352-21.550352h41.349074c11.863309 0 21.563622 9.687042 21.563622 21.550352v41.322534z"
                    p-id="7394"></path>
                <path
                    d="M789.069317 340.599064c-138.949344 0-251.597704 112.63509-251.597703 251.597704 0 138.949344 112.64836 251.597704 251.597703 251.597704s251.597704-112.64836 251.597704-251.597704-112.64836-251.597704-251.597704-251.597704z m-0.902354 457.37437c-113.630334 0-205.763396-92.133062-205.763397-205.776666s92.119792-205.763396 205.763397-205.763396 205.776666 92.119792 205.776666 205.763396c-0.01327 113.643604-92.133062 205.776666-205.776666 205.776666z"
                    p-id="7395"></path>
            </svg>
            <a class="navbar-brand" href="#">选房管家</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item nav-item-combined">
                        <a class="nav-link active" aria-current="page" href="login.html">登录</a>
                        <span class="nav-link active separator">/</span>
                        <a class="nav-link active" aria-current="page" href="register.html">注册</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container-fluid" id="whole-container1">
        <div class="form-container">
            <form id="RegisterForm" method="post">
                <h3 style="text-align: center;">注册</h3>
                <div class="mb-3 mt-3">
                    <label for="yourAccount" class="form-label">账号</label>
                    <input type="text" class="form-control" id="yourAccount" placeholder="输入账号" name="username">
                </div>
                <div class="mb-3">
                    <label for="yourPwd" class="form-label">密码</label>
                    <input type="password" class="form-control" id="yourPwd" placeholder="输入密码" name="password">
                </div>
                <div class="mb-3">
                    <label for="confirmPwd" class="form-label">确认密码</label>
                    <input type="password" class="form-control" id="confirmPwd" placeholder="再次输入密码" name="confirmPassword">
                </div>
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary" id="registerButton">注册</button>
                </div>
            </form>
            <p class="text-center extra-link"><a href="login.html" target="">已有账号，去登录</a></p>
        </div>
    </div>

    <script>
        document.getElementById('RegisterForm').addEventListener('submit', function (event) {
            event.preventDefault(); // 阻止表单默认提交行为

            let username = document.getElementById('yourAccount').value;
            let password = document.getElementById('yourPwd').value;
            let confirmPassword = document.getElementById('confirmPwd').value;

            // 前端检查用户名是否为空
            if (!username) {
                alert('请输入用户名');
                return;
            }
            if (password !== confirmPassword) {
                alert('密码和确认密码不一致，请重新输入。');
                return;
            }

            // 发送 AJAX 请求给后端验证用户名是否重复
            let xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost:3000/checkUsername', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onload = function () {
                if (xhr.status === 200) {
                    // 后端验证成功，可以注册
                    document.getElementById('RegisterForm').submit(); // 提交表单
                } else {
                    // 后端验证失败，显示错误信息
                    alert(xhr.responseText);
                }
            };
            xhr.send(JSON.stringify({ username: username }));
        });
    </script>
    <script src="bootstrap-5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
